# ðŸŽ‰ FarsNews Crawler - PostgreSQL Edition

## âœ… Ù…Ù‡Ø§Ø¬Ø±Øª Ø¨Ù‡ PostgreSQL ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯!

Ø³ÛŒØ³ØªÙ… Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø² SQLite Ø¨Ù‡ PostgreSQL Ù…Ù‡Ø§Ø¬Ø±Øª Ú©Ø±Ø¯Ù‡ Ùˆ Ø­Ø§Ù„Ø§ Ú©Ø§Ù…Ù„Ø§Ù‹ PostgreSQL-Only Ø§Ø³Øª!

## ðŸš€ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÛŒØ¹

### 1. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PostgreSQL
```bash
# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PostgreSQL Ø¨Ø§ Docker
docker-compose -f docker-compose.postgres.yml up -d

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
docker ps
```

### 2. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ±
```bash
# Ø±ÙˆØ´ 1: Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø¨Ø§ Docker (ØªÙˆØµÛŒÙ‡ Ø´Ø¯Ù‡)
start-docker-system.bat

# Ø±ÙˆØ´ 2: Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø¨Ø§ PM2
pm2-manager.bat

# Ø±ÙˆØ´ 3: Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ…
start-complete-system.bat

# Ø±ÙˆØ´ 4: Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ…
node index.js

# Ø±ÙˆØ´ 5: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÙØ§ÛŒÙ„ batch Ø³Ø§Ø¯Ù‡
start-server.bat

# Ø±ÙˆØ´ 6: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² npm
npm start
```

### 3. Ù…Ø¯ÛŒØ±ÛŒØª PM2
```bash
# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ± Ø³Ø§Ø¯Ù‡
pm2 start simple-server.js --name "farsnews-simple"

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ± Ú©Ø§Ù…Ù„
pm2 start index.js --name "farsnews-crawler"

# Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª
pm2 status

# Ù†Ù…Ø§ÛŒØ´ Ù„Ø§Ú¯â€ŒÙ‡Ø§
pm2 logs

# ØªÙˆÙ‚Ù Ù‡Ù…Ù‡ Ø³Ø±ÙˆØ±Ù‡Ø§
pm2 stop all

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯
pm2 restart all
```

### 4. ØªÙˆÙ‚Ù Ø³ÛŒØ³ØªÙ…
```bash
# ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ…
stop-complete-system.bat

# ØªÙˆÙ‚Ù PM2
pm2 stop all
```

### 3. Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…
- **Ø³Ø±ÙˆØ± Ø§ØµÙ„ÛŒ**: http://localhost:3004
- **Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†**: http://localhost:3004/admin
- **PgAdmin**: http://localhost:8080
  - Email: admin@example.com
  - Password: admin123

## ðŸ“Š ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ

### âœ… PostgreSQL:
- **Ø¯ÛŒØªØ§Ø¨ÛŒØ³**: PostgreSQL 15
- **Ù¾ÙˆØ±Øª**: 5433
- **Ú©Ø§Ø±Ø¨Ø±**: farsnews_user
- **Ø¯ÛŒØªØ§Ø¨ÛŒØ³**: farsnews_crawler_spider_db
- **ÙˆØ¶Ø¹ÛŒØª**: âœ… Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§

### âœ… Ø¬Ø¯Ø§ÙˆÙ„ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡:
- news_sources (Ù…Ù†Ø§Ø¨Ø¹ Ø®Ø¨Ø±ÛŒ)
- articles (Ù…Ù‚Ø§Ù„Ø§Øª)
- crawl_history (ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ú©Ø±Ø§Ù„)
- performance_metrics (Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯)
- queue_jobs (ØµÙ Ú©Ø§Ø±Ù‡Ø§)
- admin_users (Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§Ø¯Ù…ÛŒÙ†)
- crawl_logs (Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ú©Ø±Ø§Ù„)
- operation_logs (Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒØ§Øª)
- schedules (Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§)
- selector_configs (Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ selector Ù‡Ø§)

### âœ… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡:
- **Ù…Ù†Ø§Ø¨Ø¹ Ø®Ø¨Ø±ÛŒ**: 4 Ù…Ù†Ø¨Ø¹ (ÙØ§Ø±Ø³â€ŒÙ†ÛŒÙˆØ²ØŒ Ù…Ù‡Ø±ØŒ Ø¢Ø±ÛŒØ§ØŒ Ø§ÛŒØ±Ù†Ø§)
- **Ú©Ø§Ø±Ø¨Ø± Ø§Ø¯Ù…ÛŒÙ†**: admin/admin123
- **Ù…Ù‚Ø§Ù„Ø§Øª**: Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ú©Ø±Ø§Ù„

## ðŸ§ª ØªØ³Øª Ø³ÛŒØ³ØªÙ…

### ØªØ³Øª Ø³Ø±ÛŒØ¹:
```bash
cd test
node simple-test.js
```

### ØªØ³Øª Ø§Ø³ØªØ±Ø³:
```bash
cd test
node stress-test.js
```

### ØªØ³Øª CI:
```bash
cd test
node ci-test.js
```

## ðŸ”§ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯ÛŒØªØ§Ø¨ÛŒØ³

### Backup:
```bash
docker exec farsnews_postgres pg_dump -U farsnews_user farsnews_crawler_spider_db > backup.sql
```

### Restore:
```bash
docker exec -i farsnews_postgres psql -U farsnews_user farsnews_crawler_spider_db < backup.sql
```

### Ø§ØªØµØ§Ù„ Ù…Ø³ØªÙ‚ÛŒÙ…:
```bash
docker exec -it farsnews_postgres psql -U farsnews_user -d farsnews_crawler_spider_db
```

## ðŸ“ˆ Ø¹Ù…Ù„Ú©Ø±Ø¯

### Ù†ØªØ§ÛŒØ¬ ØªØ³Øª:
- **Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®**: 18-113ms (Ø¹Ø§Ù„ÛŒ)
- **Ù†Ø±Ø® Ù…ÙˆÙÙ‚ÛŒØª**: 80%+
- **Ø­Ø§ÙØ¸Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡**: ~50MB
- **Ø§ØªØµØ§Ù„Ø§Øª Ù‡Ù…Ø²Ù…Ø§Ù†**: 20

### Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯Ù‡:
- Connection Pooling
- Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡
- ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø­Ø§ÙØ¸Ù‡ PostgreSQL
- Rate Limiting
- Caching

## ðŸ—‘ï¸ Ø­Ø°Ù SQLite

ØªÙ…Ø§Ù… ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ÛŒ SQLite Ø­Ø°Ù Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯:
- âœ… ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ SQLite Ø­Ø°Ù Ø´Ø¯Ù†Ø¯
- âœ… ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ÛŒ package.json Ø­Ø°Ù Ø´Ø¯Ù†Ø¯
- âœ… import Ù‡Ø§ÛŒ SQLite Ø­Ø°Ù Ø´Ø¯Ù†Ø¯
- âœ… Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯

## ðŸ” Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª

### Ú©Ø§Ø±Ø¨Ø± Ø§Ø¯Ù…ÛŒÙ† Ù¾ÛŒØ´â€ŒÙØ±Ø¶:
- **Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ**: admin
- **Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±**: admin123
- **Ø§ÛŒÙ…ÛŒÙ„**: admin@crawler.local

## ðŸ“ Ù†Ú©Ø§Øª Ù…Ù‡Ù…

1. **Backup Ù…Ù†Ø¸Ù…**: Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² Ø¯ÛŒØªØ§Ø¨ÛŒØ³ backup Ø¨Ú¯ÛŒØ±ÛŒØ¯
2. **Monitoring**: ÙˆØ¶Ø¹ÛŒØª PostgreSQL Ø±Ø§ Ù†Ø¸Ø§Ø±Øª Ú©Ù†ÛŒØ¯
3. **Ø§Ù…Ù†ÛŒØª**: Ø±Ù…Ø²Ù‡Ø§ÛŒ Ø¹Ø¨ÙˆØ± Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯
4. **Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ**: Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª

## ðŸš¨ Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

### Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬:

#### 1. Ø®Ø·Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
```bash
# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ù†ØªÛŒÙ†Ø±
docker ps

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯
docker-compose -f docker-compose.postgres.yml restart
```

#### 2. Ø®Ø·Ø§ÛŒ Ù¾ÙˆØ±Øª
```bash
# ØªØºÛŒÛŒØ± Ù¾ÙˆØ±Øª Ø¯Ø± docker-compose.postgres.yml
ports:
  - "5434:5432"  # Ù¾ÙˆØ±Øª Ø¬Ø¯ÛŒØ¯
```

#### 3. Ø³Ø±ÙˆØ± Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
```bash
# Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§
docker logs farsnews_postgres

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ Ø³Ø±ÙˆØ±
node index.js
```

## ðŸŽ¯ Ù…Ø²Ø§ÛŒØ§ÛŒ PostgreSQL

### Ø¯Ø± Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§ SQLite:
- âœ… **Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ù‡ØªØ±**
- âœ… **Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ø§Ù„Ø§ØªØ±**
- âœ… **Ø§Ù…Ù†ÛŒØª Ø¨ÛŒØ´ØªØ±**
- âœ… **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡**
- âœ… **Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡**
- âœ… **Backup Ùˆ Recovery Ø¨Ù‡ØªØ±**
- âœ… **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² JSON**
- âœ… **Full-text Search**

## ðŸš€ Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯

Ø³ÛŒØ³ØªÙ… Ø´Ù…Ø§ Ø­Ø§Ù„Ø§ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª Ø¨Ø±Ø§ÛŒ:
- âœ… Ù…Ø­ÛŒØ· ØªÙˆØ³Ø¹Ù‡
- âœ… Ù…Ø­ÛŒØ· ØªØ³Øª
- âœ… Ù…Ø­ÛŒØ· ØªÙˆÙ„ÛŒØ¯
- âœ… Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ø§Ù„Ø§
- âœ… Ø¨Ø§Ø± Ø¨Ø§Ù„Ø§

---

## ðŸŽ‰ Ø®Ù„Ø§ØµÙ‡ Ù†Ù‡Ø§ÛŒÛŒ

### âœ… Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡:
1. **Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PostgreSQL Ø¨Ø§ Docker**
2. **Ø­Ø°Ù Ú©Ø§Ù…Ù„ SQLite**
3. **Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø³ÛŒØ³ØªÙ…**
4. **Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„ Ùˆ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡**
5. **Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯**

### ðŸš€ Ø¯Ø³ØªÙˆØ±Ø§Øª Ù†Ù‡Ø§ÛŒÛŒ:
```bash
# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PostgreSQL
docker-compose -f docker-compose.postgres.yml up -d

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ±
node index.js

# ØªØ³Øª Ø³ÛŒØ³ØªÙ…
cd test && node simple-test.js
```

**ðŸŽ‰ ØªØ¨Ø±ÛŒÚ©! Ù…Ù‡Ø§Ø¬Ø±Øª Ø¨Ù‡ PostgreSQL Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯!**

Ø³ÛŒØ³ØªÙ… Ø´Ù…Ø§ Ø­Ø§Ù„Ø§ Ú©Ø§Ù…Ù„Ø§Ù‹ PostgreSQL-Only Ø§Ø³Øª Ùˆ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ù…Ø­ÛŒØ· ØªÙˆÙ„ÛŒØ¯! 