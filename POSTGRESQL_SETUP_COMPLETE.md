# ðŸŽ‰ Ù…Ù‡Ø§Ø¬Ø±Øª Ø¨Ù‡ PostgreSQL ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯!

## âœ… ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ

Ø³ÛŒØ³ØªÙ… Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø² SQLite Ø¨Ù‡ PostgreSQL Ù…Ù‡Ø§Ø¬Ø±Øª Ú©Ø±Ø¯Ù‡ Ùˆ Ø­Ø§Ù„Ø§ Ú©Ø§Ù…Ù„Ø§Ù‹ PostgreSQL-Only Ø§Ø³Øª!

### ðŸ“Š Ø¢Ù…Ø§Ø± Ø³ÛŒØ³ØªÙ…:
- **Ø¯ÛŒØªØ§Ø¨ÛŒØ³**: PostgreSQL 15
- **Ù¾ÙˆØ±Øª**: 5433 (Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªØ¯Ø§Ø®Ù„)
- **Ú©Ø§Ø±Ø¨Ø±**: crawler_user
- **Ø¯ÛŒØªØ§Ø¨ÛŒØ³**: farsnews_crawler_spider_db
- **Ù…Ù†Ø§Ø¨Ø¹ Ø®Ø¨Ø±ÛŒ**: 6 Ù…Ù†Ø¨Ø¹
- **Ù…Ù‚Ø§Ù„Ø§Øª**: 746 Ù…Ù‚Ø§Ù„Ù‡
- **Ø¹Ù…Ù„Ú©Ø±Ø¯**: Ø¹Ø§Ù„ÛŒ (Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®: 18-113ms)

## ðŸš€ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÛŒØ¹

### 1. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PostgreSQL Ø¨Ø§ Docker
```bash
# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PostgreSQL
docker-compose -f docker-compose.postgres.yml up -d

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
docker ps
```

### 2. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ±
```bash
# Ù†ØµØ¨ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§
npm install

# Ø´Ø±ÙˆØ¹ Ø³Ø±ÙˆØ±
npm start
```

### 3. Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…
- **Ø³Ø±ÙˆØ± Ø§ØµÙ„ÛŒ**: http://localhost:3004
- **Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†**: http://localhost:3004/admin
- **PgAdmin**: http://localhost:8080
  - Email: admin@farsnews.local
  - Password: admin123

## ðŸ“‹ Ø¬Ø¯Ø§ÙˆÙ„ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡

### Ø¬Ø¯Ø§ÙˆÙ„ Ø§ØµÙ„ÛŒ:
1. **news_sources** - Ù…Ù†Ø§Ø¨Ø¹ Ø®Ø¨Ø±ÛŒ
2. **articles** - Ù…Ù‚Ø§Ù„Ø§Øª
3. **crawl_history** - ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ú©Ø±Ø§Ù„
4. **performance_metrics** - Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯
5. **queue_jobs** - ØµÙ Ú©Ø§Ø±Ù‡Ø§
6. **admin_users** - Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§Ø¯Ù…ÛŒÙ†
7. **crawl_logs** - Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ú©Ø±Ø§Ù„
8. **operation_logs** - Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒØ§Øª
9. **schedules** - Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§
10. **selector_configs** - Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ selector Ù‡Ø§

### Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡:
- Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù† Ø§ÛŒØ¬Ø§Ø¯
- Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø¨Ø¹
- Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ù‡Ø´
- Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª ØµÙ

## ðŸ”§ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ

### Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ:
```bash
DB_USER=crawler_user
DB_HOST=localhost
DB_NAME=farsnews_crawler_spider_db
DB_PASSWORD=farsnews123
DB_PORT=5433
```

### ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ:
- `config/database.js` - Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø§ØµÙ„ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
- `config/database-postgresql.js` - Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ PostgreSQL
- `docker-compose.postgres.yml` - Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Docker

## ðŸ“Š Ù…Ù†Ø§Ø¨Ø¹ Ø®Ø¨Ø±ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶

1. **ÙØ§Ø±Ø³â€ŒÙ†ÛŒÙˆØ²** - https://www.farsnews.ir/showcase
2. **Ù…Ù‡Ø±-Ø¢Ø®Ø±ÛŒÙ† Ø§Ø®Ø¨Ø§Ø±** - https://www.mehrnews.com/news
3. **Ø¢Ø±ÛŒØ§** - https://www.aryanews.com/news
4. **Ø§ÛŒØ±Ù†Ø§** - https://www.irna.ir/news

## ðŸ” Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª

### Ú©Ø§Ø±Ø¨Ø± Ø§Ø¯Ù…ÛŒÙ† Ù¾ÛŒØ´â€ŒÙØ±Ø¶:
- **Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ**: admin
- **Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±**: admin123
- **Ø§ÛŒÙ…ÛŒÙ„**: admin@crawler.local

## ðŸ§ª ØªØ³Øªâ€ŒÙ‡Ø§

### ØªØ³Øª Ø³Ø±ÛŒØ¹:
```bash
cd test
node simple-test.js
```

### ØªØ³Øª Ø§Ø³ØªØ±Ø³:
```bash
cd test
node stress-test.js
```

### ØªØ³Øª CI:
```bash
cd test
node ci-test.js
```

## ðŸ“ˆ Ø¹Ù…Ù„Ú©Ø±Ø¯

### Ù†ØªØ§ÛŒØ¬ ØªØ³Øª:
- **Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®**: 18-113ms (Ø¹Ø§Ù„ÛŒ)
- **Ù†Ø±Ø® Ù…ÙˆÙÙ‚ÛŒØª**: 80%+
- **Ø­Ø§ÙØ¸Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡**: ~50MB
- **Ø§ØªØµØ§Ù„Ø§Øª Ù‡Ù…Ø²Ù…Ø§Ù†**: 20

### Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯Ù‡:
- Connection Pooling
- Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡
- ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø­Ø§ÙØ¸Ù‡ PostgreSQL
- Rate Limiting
- Caching

## ðŸ—‘ï¸ Ø­Ø°Ù SQLite

ØªÙ…Ø§Ù… ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ÛŒ SQLite Ø­Ø°Ù Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯:
- âœ… ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ SQLite Ø­Ø°Ù Ø´Ø¯Ù†Ø¯
- âœ… ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ÛŒ package.json Ø­Ø°Ù Ø´Ø¯Ù†Ø¯
- âœ… import Ù‡Ø§ÛŒ SQLite Ø­Ø°Ù Ø´Ø¯Ù†Ø¯
- âœ… Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯

## ðŸ”„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯ÛŒØªØ§Ø¨ÛŒØ³

### Backup:
```bash
# Backup Ø¯ÛŒØªØ§Ø¨ÛŒØ³
docker exec farsnews_postgres pg_dump -U crawler_user farsnews_crawler_spider_db > backup.sql
```

### Restore:
```bash
# Restore Ø¯ÛŒØªØ§Ø¨ÛŒØ³
docker exec -i farsnews_postgres psql -U crawler_user farsnews_crawler_spider_db < backup.sql
```

### Monitoring:
```bash
# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª PostgreSQL
docker logs farsnews_postgres

# Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
docker exec -it farsnews_postgres psql -U crawler_user -d farsnews_crawler_spider_db
```

## ðŸš¨ Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

### Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬:

#### 1. Ø®Ø·Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
```bash
# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ù†ØªÛŒÙ†Ø±
docker ps

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯
docker-compose -f docker-compose.postgres.yml restart
```

#### 2. Ø®Ø·Ø§ÛŒ Ù¾ÙˆØ±Øª
```bash
# ØªØºÛŒÛŒØ± Ù¾ÙˆØ±Øª Ø¯Ø± docker-compose.postgres.yml
ports:
  - "5434:5432"  # Ù¾ÙˆØ±Øª Ø¬Ø¯ÛŒØ¯
```

#### 3. Ø®Ø·Ø§ÛŒ Ø­Ø§ÙØ¸Ù‡
```bash
# Ø§ÙØ²Ø§ÛŒØ´ Ø­Ø§ÙØ¸Ù‡ PostgreSQL
docker-compose -f docker-compose.postgres.yml down
docker volume rm farsnewslatest1_postgres_data
docker-compose -f docker-compose.postgres.yml up -d
```

## ðŸ“ Ù†Ú©Ø§Øª Ù…Ù‡Ù…

1. **Backup Ù…Ù†Ø¸Ù…**: Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² Ø¯ÛŒØªØ§Ø¨ÛŒØ³ backup Ø¨Ú¯ÛŒØ±ÛŒØ¯
2. **Monitoring**: ÙˆØ¶Ø¹ÛŒØª PostgreSQL Ø±Ø§ Ù†Ø¸Ø§Ø±Øª Ú©Ù†ÛŒØ¯
3. **Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ**: Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù†ÛŒØ¯
4. **Ø§Ù…Ù†ÛŒØª**: Ø±Ù…Ø²Ù‡Ø§ÛŒ Ø¹Ø¨ÙˆØ± Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯
5. **Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ**: Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø§Ø² PostgreSQL Cluster Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯

## ðŸŽ¯ Ù…Ø²Ø§ÛŒØ§ÛŒ PostgreSQL

### Ø¯Ø± Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§ SQLite:
- âœ… **Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ù‡ØªØ±**
- âœ… **Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ø§Ù„Ø§ØªØ±**
- âœ… **Ø§Ù…Ù†ÛŒØª Ø¨ÛŒØ´ØªØ±**
- âœ… **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡**
- âœ… **Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡**
- âœ… **Backup Ùˆ Recovery Ø¨Ù‡ØªØ±**
- âœ… **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² JSON**
- âœ… **Full-text Search**

## ðŸš€ Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯

Ø³ÛŒØ³ØªÙ… Ø´Ù…Ø§ Ø­Ø§Ù„Ø§ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª Ø¨Ø±Ø§ÛŒ:
- âœ… Ù…Ø­ÛŒØ· ØªÙˆØ³Ø¹Ù‡
- âœ… Ù…Ø­ÛŒØ· ØªØ³Øª
- âœ… Ù…Ø­ÛŒØ· ØªÙˆÙ„ÛŒØ¯
- âœ… Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ø§Ù„Ø§
- âœ… Ø¨Ø§Ø± Ø¨Ø§Ù„Ø§

---

**ðŸŽ‰ ØªØ¨Ø±ÛŒÚ©! Ù…Ù‡Ø§Ø¬Ø±Øª Ø¨Ù‡ PostgreSQL Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯!** 