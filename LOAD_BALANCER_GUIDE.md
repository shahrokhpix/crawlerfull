# ุฑุงูููุง ุณุณุชู ูุฏุฑุช ุจุงุฑ (Load Balancer)

## ููุฏูู

ุณุณุชู ูุฏุฑุช ุจุงุฑ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจุงุฑ ุณุณุชู ุฑุง ฺฉูุชุฑู ูโฺฉูุฏ ู ุงุฒ ูุดฺฉูุงุช ุนููฺฉุฑุฏ ุฌููฺฏุฑ ูโฺฉูุฏ. ุงู ุณุณุชู ุดุงูู cron jobs ููุดููุฏ ุงุณุช ฺฉู ุจู ุตูุฑุช ูุฏุงูู ูุถุนุช ุณุณุชู ุฑุง ุจุฑุฑุณ ู ุชูุธู ูโฺฉูุฏ.

## ูฺฺฏโูุง ุงุตู

### 1. ูุงูุชูุฑูฺฏ ุฎูุฏฺฉุงุฑ
- ุจุฑุฑุณ ุจุงุฑ CPU ูุฑ 30 ุซุงูู
- ุจุฑุฑุณ ุญุงูุธู ูุฑ 5 ุฏููู
- ุจุฑุฑุณ ุฏุชุงุจุณ ูุฑ 30 ุฏููู
- ุจุฑุฑุณ ุณูุงูุช ุณุณุชู ูุฑ 10 ุฏููู

### 2. ุชูุธู ุฎูุฏฺฉุงุฑ ุจุงุฑ
- **ุญุงูุช ุนุงุฏ (Normal)**: 3 ฺฉุฑุงู ููุฒูุงู
- **ุญุงูุช ูุชูุณุท (Moderate)**: 2 ฺฉุฑุงู ููุฒูุงู
- **ุญุงูุช ุจุงูุง (High)**: 1 ฺฉุฑุงู ููุฒูุงู
- **ุญุงูุช ุงุถุทุฑุงุฑ (Emergency)**: 0 ฺฉุฑุงู ููุฒูุงู

### 3. ูพุงฺฉุณุงุฒ ุฎูุฏฺฉุงุฑ
- ูพุงฺฉุณุงุฒ ุญุงูุธู ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุจุงูุง
- ูพุงฺฉุณุงุฒ cache ูุฑ 15 ุฏููู
- ูพุงฺฉุณุงุฒ ูุงฺฏโูุง ูุฏู ูุฑ ุณุงุนุช
- ุจูููโุณุงุฒ ุฏุชุงุจุณ ูุฑ 30 ุฏููู

## API Endpoints

### 1. ุฏุฑุงูุช ูุถุนุช
```bash
GET /api/load-balancer/status
```

### 2. ุชูุธู ุญุงูุช ุจุงุฑ
```bash
POST /api/load-balancer/mode
{
  "mode": "normal" // normal, moderate, high, emergency
}
```

### 3. ูพุงฺฉุณุงุฒ ุงุถุทุฑุงุฑ
```bash
POST /api/load-balancer/emergency-cleanup
```

### 4. ูพุงฺฉุณุงุฒ ุญุงูุธู
```bash
POST /api/load-balancer/memory-cleanup
```

### 5. ุจูููโุณุงุฒ ุฏุชุงุจุณ
```bash
POST /api/load-balancer/database-optimization
```

### 6. ุชูุธู ุขุณุชุงููโูุง
```bash
POST /api/load-balancer/thresholds
{
  "cpu": 70,
  "memory": 75,
  "disk": 85,
  "database": 2000
}
```

### 7. ุฏุฑุงูุช ุขูุงุฑ ุณุณุชู
```bash
GET /api/load-balancer/system-stats
```

### 8. ุดุฑูุน/ุชููู ุณุณุชู
```bash
POST /api/load-balancer/toggle
{
  "action": "start" // start, stop
}
```

## Cron Jobs

### 1. ุจุฑุฑุณ ุจุงุฑ (ูุฑ 30 ุซุงูู)
```javascript
'*/30 * * * * *'
```
- ุจุฑุฑุณ CPUุ ุญุงูุธูุ ุฏุชุงุจุณ
- ุชุดุฎุต ุณุทุญ ุจุงุฑ
- ุชูุธู ุฎูุฏฺฉุงุฑ ุญุงูุช

### 2. ูพุงฺฉุณุงุฒ ุญุงูุธู (ูุฑ 5 ุฏููู)
```javascript
'*/5 * * * *'
```
- ูพุงฺฉุณุงุฒ cache ูุง
- Garbage Collection
- ูพุงฺฉุณุงุฒ ุญุงูุธู ุบุฑุถุฑูุฑ

### 3. ุจูููโุณุงุฒ ุฏุชุงุจุณ (ูุฑ 30 ุฏููู)
```javascript
'*/30 * * * *'
```
- ุชุญูู ุฌุฏุงูู
- ูพุงฺฉุณุงุฒ ุฏุงุฏูโูุง ูุฏู
- ุจูููโุณุงุฒ index ูุง

### 4. ูพุงฺฉุณุงุฒ ูุงฺฏโูุง (ูุฑ ุณุงุนุช)
```javascript
'0 * * * *'
```
- ุญุฐู ูุงฺฏโูุง ูุฏู (ุจุด ุงุฒ 7 ุฑูุฒ)
- ุขุฒุงุฏุณุงุฒ ูุถุง ุฏุณฺฉ

### 5. ุจุฑุฑุณ ุณูุงูุช (ูุฑ 10 ุฏููู)
```javascript
'*/10 * * * *'
```
- ุจุฑุฑุณ ูุถุนุช ฺฉู ุณุณุชู
- ุงูุฏุงูุงุช ุงุตูุงุญ ุฎูุฏฺฉุงุฑ

### 6. ูพุงฺฉุณุงุฒ Cache (ูุฑ 15 ุฏููู)
```javascript
'*/15 * * * *'
```
- ูพุงฺฉุณุงุฒ cache ูุง ูููุถ ุดุฏู
- ุขุฒุงุฏุณุงุฒ ุญุงูุธู

### 7. ุชูุธู ูุฌุฏุฏ ุจุงุฑ (ูุฑ 2 ุฏููู)
```javascript
'*/2 * * * *'
```
- ุจูุจูุฏ ุชุฏุฑุฌ ุฏุฑ ุตูุฑุช ฺฉุงูุด ุจุงุฑ
- ุชูุธู ุฎูุฏฺฉุงุฑ ุญุงูุชโูุง

## ุญุงูุชโูุง ุจุงุฑ

### ุญุงูุช ุนุงุฏ (Normal)
```javascript
{
  concurrentCrawls: 3,
  delayBetweenCrawls: 2000,
  timeoutMultiplier: 1
}
```

### ุญุงูุช ูุชูุณุท (Moderate)
```javascript
{
  concurrentCrawls: 2,
  delayBetweenCrawls: 5000,
  timeoutMultiplier: 1.5
}
```

### ุญุงูุช ุจุงูุง (High)
```javascript
{
  concurrentCrawls: 1,
  delayBetweenCrawls: 10000,
  timeoutMultiplier: 2
}
```

### ุญุงูุช ุงุถุทุฑุงุฑ (Emergency)
```javascript
{
  concurrentCrawls: 0,
  delayBetweenCrawls: 30000,
  timeoutMultiplier: 3
}
```

## ุขุณุชุงููโูุง ูพุดโูุฑุถ

- **CPU**: 70%
- **ุญุงูุธู**: 75%
- **ุฏุณฺฉ**: 85%
- **ุฏุชุงุจุณ**: 2000ms

## ุงูุฏุงูุงุช ุฎูุฏฺฉุงุฑ

### 1. ุญุงูุธู ุจุญุฑุงู (>85%)
- ูพุงฺฉุณุงุฒ ุงุถุทุฑุงุฑ cache ูุง
- Garbage Collection ุงุฌุจุงุฑ
- ุชูุธู ุญุงูุช ุงุถุทุฑุงุฑ

### 2. CPU ุจุญุฑุงู (>85%)
- ฺฉุงูุด ุชุนุฏุงุฏ ฺฉุฑุงูโูุง ููุฒูุงู
- ุชูุธู ุญุงูุช ุงุถุทุฑุงุฑ
- ุงูุฒุงุด delay ุจู ฺฉุฑุงูโูุง

### 3. ุฏุชุงุจุณ ฺฉูุฏ (>3000ms)
- ุจูููโุณุงุฒ ุฎูุฏฺฉุงุฑ ุฏุชุงุจุณ
- ูพุงฺฉุณุงุฒ ุฏุงุฏูโูุง ูุฏู
- ุชุญูู ุฌุฏุงูู

### 4. ุจูุจูุฏ ุชุฏุฑุฌ
- ุฏุฑ ุตูุฑุช ฺฉุงูุด ุจุงุฑุ ุญุงูุชโูุง ุจู ุชุฏุฑุฌ ุจูุจูุฏ ูโุงุจูุฏ
- ุงุฒ ุญุงูุช ุงุถุทุฑุงุฑ ุจู ุจุงูุงุ ุณูพุณ ูุชูุณุท ู ููุงุชุงู ุนุงุฏ

## ูุงฺฏโูุง ู ูุงูุชูุฑูฺฏ

### ูุงฺฏโูุง ููู
```
๐ ุชุบุฑ ุญุงูุช ุจุงุฑ: normal โ moderate
โ๏ธ ุจุงุฑ ุณุณุชู: high - CPU: 82%, Memory: 78%
๐จ ุญุงูุธู ุจุญุฑุงูุ ุดุฑูุน ูพุงฺฉุณุงุฒ ุงุถุทุฑุงุฑ...
โ ูพุงฺฉุณุงุฒ ุญุงูุธู ุชฺฉูู ุดุฏ
```

### ูุงูุชูุฑูฺฏ
- ุชูุงู ุชุบุฑุงุช ุฏุฑ ูุงฺฏโูุง ุซุจุช ูโุดููุฏ
- ุขูุงุฑ ุณุณุชู ุฏุฑ API ูุงุจู ุฏุณุชุฑุณ ุงุณุช
- ูุดุฏุงุฑูุง ุฎูุฏฺฉุงุฑ ุจุฑุง ูุดฺฉูุงุช

## ุชูุธูุงุช ูพุดุฑูุชู

### ุชูุธู ุขุณุชุงููโูุง
```javascript
loadBalancer.setThresholds(65, 70, 80, 1500);
```

### ุชูุธู ุญุงูุชโูุง ุจุงุฑ
```javascript
loadBalancer.setLoadModes({
  custom: {
    concurrentCrawls: 1,
    delayBetweenCrawls: 15000,
    timeoutMultiplier: 2.5
  }
});
```

## ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ

1. **ุณุณุชู ุฏุฑ ุญุงูุช ุงุถุทุฑุงุฑ ฺฏุฑ ฺฉุฑุฏู**
   - ุจุฑุฑุณ ูุงฺฏโูุง ุจุฑุง ุนูุช
   - ุงุฌุฑุง ูพุงฺฉุณุงุฒ ุงุถุทุฑุงุฑ
   - ุจุฑุฑุณ ููุงุจุน ุณุณุชู

2. **ุชุบุฑุงุช ุญุงูุช ุงุนูุงู ููโุดููุฏ**
   - ุจุฑุฑุณ ูุถุนุช cron jobs
   - ุจุฑุฑุณ ูุงฺฏโูุง ุฎุทุง
   - ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุณุฑูุณ

3. **ุนููฺฉุฑุฏ ฺฉูุฏ**
   - ุจุฑุฑุณ ุขุณุชุงููโูุง
   - ุชูุธู ูุฌุฏุฏ ุขุณุชุงููโูุง
   - ุจุฑุฑุณ ููุงุจุน ุณุณุชู

### ุฏุณุชูุฑุงุช ููุฏ

```bash
# ุจุฑุฑุณ ูุถุนุช
curl http://localhost:3004/api/load-balancer/status

# ุชูุธู ุญุงูุช ุงุถุทุฑุงุฑ
curl -X POST http://localhost:3004/api/load-balancer/mode \
  -H "Content-Type: application/json" \
  -d '{"mode": "emergency"}'

# ูพุงฺฉุณุงุฒ ุงุถุทุฑุงุฑ
curl -X POST http://localhost:3004/api/load-balancer/emergency-cleanup

# ุฏุฑุงูุช ุขูุงุฑ ุณุณุชู
curl http://localhost:3004/api/load-balancer/system-stats
```

## ูุชุฌูโฺฏุฑ

ุณุณุชู ูุฏุฑุช ุจุงุฑ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฒ ูุดฺฉูุงุช ุนููฺฉุฑุฏ ุฌููฺฏุฑ ูโฺฉูุฏ ู ูพุงุฏุงุฑ ุณุณุชู ุฑุง ุชุถูู ูโฺฉูุฏ. ุจุง ุงุณุชูุงุฏู ุงุฒ ุงู ุณุณุชูุ ูุดฺฉูุงุช ูุดุงุจู ฺฏุฐุดุชู ุชฺฉุฑุงุฑ ูุฎูุงููุฏ ุดุฏ. 